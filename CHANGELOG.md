# Changelog

All notable changes to this project are documented in this file.

The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/),
and this project adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html).

This changelog is automatically generated by [release-please](https://github.com/googleapis/release-please) based on [Conventional Commits](https://www.conventionalcommits.org/).

## [1.22.0](https://github.com/ncl-icb-analytics/dbt-ncl-analytics/compare/v1.21.0...v1.22.0) (2025-10-26)


### Features

* enable auto-merge for Release PRs and fix release notes quoting ([#148](https://github.com/ncl-icb-analytics/dbt-ncl-analytics/issues/148)) ([e199389](https://github.com/ncl-icb-analytics/dbt-ncl-analytics/commit/e1993892ed6243fe92e7cda7f6f24c577116cf6e))

## [1.21.0](https://github.com/ncl-icb-analytics/dbt-ncl-analytics/compare/v1.20.1...v1.21.0) (2025-10-26)


### Features

* add automated releases and semantic versioning ([#145](https://github.com/ncl-icb-analytics/dbt-ncl-analytics/issues/145)) ([042a87e](https://github.com/ncl-icb-analytics/dbt-ncl-analytics/commit/042a87e6d493dc3b4903915d2caeac191cd6168b))

## [v1.20.1] - 2025-10-24

[#143](https://github.com/ncl-icb-analytics/dbt-ncl-analytics/pull/143) · _EddieDavison92_

### Fixed

- fix(bp-control): update monitoring interval thresholds

### Changed

- docs(bp-control): add monitoring intervals to model description

### Models Changed

#### Modified (1)

- `models/reporting/olids/measures/fct_person_bp_control.sql`

## [v1.20.0] - 2025-10-24

[#142](https://github.com/ncl-icb-analytics/dbt-ncl-analytics/pull/142) · _KatsplatH_

### Added

- feat: make view for SMI pop base

### Models Changed

#### Added (1)

- `models/published/direct_care/olids/serious_mental_illness/smi_population_base_dm.sql`

#### Modified (1)

- `models/modelling/olids/programme/severe_mental_illness/int_smi_population_base.sql`

## [v1.19.2] - 2025-10-24

[#141](https://github.com/ncl-icb-analytics/dbt-ncl-analytics/pull/141) · _EddieDavison92_

### Changed

- refactor(valproate): improve medication matching logic

### Models Changed

#### Modified (1)

- `models/modelling/olids/medications/int_valproate_medications_all.sql`

## [v1.19.1] - 2025-10-24

[#140](https://github.com/ncl-icb-analytics/dbt-ncl-analytics/pull/140) · _EddieDavison92_

### Changed

- refactor(olids): reorganise published models into subdomain folders with auto-generated schemas

### Models Changed

## [v1.19.0] - 2025-10-23

[#139](https://github.com/ncl-icb-analytics/dbt-ncl-analytics/pull/139) · _KatsplatH_

### Added

- feat: create smi population base

### Models Changed

#### Added (1)

- `models/modelling/olids/programme/severe_mental_illness/int_smi_population_base.sql`

## [v1.18.0] - 2025-10-22

[#137](https://github.com/ncl-icb-analytics/dbt-ncl-analytics/pull/137) · _KatsplatH_

### Added

- feat: Update SMI alcohol observation models to improve unit standardization and add risk category

### Models Changed

#### Modified (2)

- `models/modelling/olids/observations/int_smi_alcohol_all.sql`
- `models/modelling/olids/observations/int_smi_alcohol_latest.sql`

## [v1.17.4] - 2025-10-22

[#136](https://github.com/ncl-icb-analytics/dbt-ncl-analytics/pull/136) · _jessica-roberts-67_

### Changed

- Adding new column descriptions to yml file
- Adding in MH activity into person activity by month table
- Add int_ models for mhsds spells and carecontacts
- adding in mhsds bridging file and standardising logic to use pseudo_nhs_number across csds and mhsds (no impact on csds)
- Updating dedupe logic and adding in staging model for active submission (needed for cleaning)
- Adding carecontact MHSDS staging model
- fix merge error
- fixing merge
- Adding simple mhsds staging model
- Updating readme
- Automatically adding all MHSDS sources and raw models

### Models Changed

#### Added (79)

- `models/modelling/commissioning/encounters/int_mhsds_carecontact_encounters.sql`
- `models/modelling/commissioning/encounters/int_mhsds_spell_encounters.sql`
- `models/raw/commissioning/raw_mhsds_activesubmission.sql`
- `models/raw/commissioning/raw_mhsds_bridging.sql`
- `models/raw/commissioning/raw_mhsds_mhs000header.sql`
- `models/raw/commissioning/raw_mhsds_mhs001mpi.sql`
- `models/raw/commissioning/raw_mhsds_mhs002gp.sql`
- `models/raw/commissioning/raw_mhsds_mhs003accommstatus.sql`
- `models/raw/commissioning/raw_mhsds_mhs004empstatus.sql`
- `models/raw/commissioning/raw_mhsds_mhs005patind.sql`
- `models/raw/commissioning/raw_mhsds_mhs006mhcarecoord.sql`
- `models/raw/commissioning/raw_mhsds_mhs007disabilitytype.sql`
- `models/raw/commissioning/raw_mhsds_mhs008careplantype.sql`
- `models/raw/commissioning/raw_mhsds_mhs009careplanagreement.sql`
- `models/raw/commissioning/raw_mhsds_mhs010asstechtosupportdistyp.sql`
- `models/raw/commissioning/raw_mhsds_mhs011socpercircumstances.sql`
- `models/raw/commissioning/raw_mhsds_mhs012overseasvisitorchargcat.sql`
- `models/raw/commissioning/raw_mhsds_mhs013mhcurrencymodel.sql`
- `models/raw/commissioning/raw_mhsds_mhs101referral.sql`
- `models/raw/commissioning/raw_mhsds_mhs102servicetypereferredto.sql`
- `models/raw/commissioning/raw_mhsds_mhs103otherreasonreferral.sql`
- `models/raw/commissioning/raw_mhsds_mhs104rtt.sql`
- `models/raw/commissioning/raw_mhsds_mhs105onwardreferral.sql`
- `models/raw/commissioning/raw_mhsds_mhs106dischargeplanagreement.sql`
- `models/raw/commissioning/raw_mhsds_mhs107medicationprescription.sql`
- `models/raw/commissioning/raw_mhsds_mhs201carecontact.sql`
- `models/raw/commissioning/raw_mhsds_mhs202careactivity.sql`
- `models/raw/commissioning/raw_mhsds_mhs203otherattend.sql`
- `models/raw/commissioning/raw_mhsds_mhs204indirectactivity.sql`
- `models/raw/commissioning/raw_mhsds_mhs205patientsddi.sql`
- `models/raw/commissioning/raw_mhsds_mhs206staffactivity.sql`
- `models/raw/commissioning/raw_mhsds_mhs301groupsession.sql`
- `models/raw/commissioning/raw_mhsds_mhs302mhdropincontact.sql`
- `models/raw/commissioning/raw_mhsds_mhs401mhactperiod.sql`
- `models/raw/commissioning/raw_mhsds_mhs402respclinicianassignment.sql`
- `models/raw/commissioning/raw_mhsds_mhs403conditionaldischarge.sql`
- `models/raw/commissioning/raw_mhsds_mhs404commtreatorder.sql`
- `models/raw/commissioning/raw_mhsds_mhs405commtreatorderrecall.sql`
- `models/raw/commissioning/raw_mhsds_mhs501hospprovspell.sql`
- `models/raw/commissioning/raw_mhsds_mhs502wardstay.sql`
- `models/raw/commissioning/raw_mhsds_mhs503assignedcareprof.sql`
- `models/raw/commissioning/raw_mhsds_mhs504delayeddischarge.sql`
- `models/raw/commissioning/raw_mhsds_mhs505restrictiveinterventinc.sql`
- `models/raw/commissioning/raw_mhsds_mhs505restrictiveintervention.sql`
- `models/raw/commissioning/raw_mhsds_mhs506assault.sql`
- `models/raw/commissioning/raw_mhsds_mhs507selfharm.sql`
- `models/raw/commissioning/raw_mhsds_mhs509homeleave.sql`
- `models/raw/commissioning/raw_mhsds_mhs510leaveofabsence.sql`
- `models/raw/commissioning/raw_mhsds_mhs511absencewithoutleave.sql`
- `models/raw/commissioning/raw_mhsds_mhs512hospspellcomm.sql`
- `models/raw/commissioning/raw_mhsds_mhs513substancemisuse.sql`
- `models/raw/commissioning/raw_mhsds_mhs514trialleave.sql`
- `models/raw/commissioning/raw_mhsds_mhs515restrictiveinterventtype.sql`
- `models/raw/commissioning/raw_mhsds_mhs516policeassistancerequest.sql`
- `models/raw/commissioning/raw_mhsds_mhs517smhexceptionalpackofcare.sql`
- `models/raw/commissioning/raw_mhsds_mhs518clinreadyfordischarge.sql`
- `models/raw/commissioning/raw_mhsds_mhs601medhistprevdiag.sql`
- `models/raw/commissioning/raw_mhsds_mhs603provdiag.sql`
- `models/raw/commissioning/raw_mhsds_mhs604primdiag.sql`
- `models/raw/commissioning/raw_mhsds_mhs605secdiag.sql`
- `models/raw/commissioning/raw_mhsds_mhs606codedscoreassessmentrefer.sql`
- `models/raw/commissioning/raw_mhsds_mhs607codedscoreassessmentact.sql`
- `models/raw/commissioning/raw_mhsds_mhs608anonselfassess.sql`
- `models/raw/commissioning/raw_mhsds_mhs609prescomp.sql`
- `models/raw/commissioning/raw_mhsds_mhs701cpacareepisode.sql`
- `models/raw/commissioning/raw_mhsds_mhs702cpareview.sql`
- `models/raw/commissioning/raw_mhsds_mhs801clustertool.sql`
- `models/raw/commissioning/raw_mhsds_mhs802clusterassess.sql`
- `models/raw/commissioning/raw_mhsds_mhs803carecluster.sql`
- `models/raw/commissioning/raw_mhsds_mhs804fiveforensicpathways.sql`
- `models/raw/commissioning/raw_mhsds_mhs901staffdetails.sql`
- `models/raw/commissioning/raw_mhsds_mhs902serviceteamdetails.sql`
- `models/raw/commissioning/raw_mhsds_mhs903warddetails.sql`
- `models/raw/commissioning/raw_mhsds_mhsds_relatedorganisation.sql`
- `models/staging/commissioning/stg_mhsds_activesubmission.sql`
- `models/staging/commissioning/stg_mhsds_bridging.sql`
- `models/staging/commissioning/stg_mhsds_carecontact.sql`
- `models/staging/commissioning/stg_mhsds_spell.sql`
- `models/staging/shared/stg_dictionary_ip_sourceofadmissions.sql`

#### Modified (2)

- `models/reporting/commissioning/person_history/fct_person_activity_by_month.sql`
- `models/staging/commissioning/stg_csds_bridging.sql`

## [v1.17.3] - 2025-10-22

[#135](https://github.com/ncl-icb-analytics/dbt-ncl-analytics/pull/135) · _EddieDavison92_

### Fixed

- fix: update yml documentation for renamed columns
- fix: update stg_olids_observation.yml column documentation
- fix: update get_observations macro to use correct column name
- fix: materialize concept tables and deduplicate concept_map
- fix: update staging models for OLIDS schema changes
- fix: update OLIDS schema and remove duplicate terminology tables

### Models Changed

#### Modified (20)

- `models/raw/olids/raw_olids_diagnostic_order.sql`
- `models/raw/olids/raw_olids_encounter.sql`
- `models/raw/olids/raw_olids_medication_order.sql`
- `models/raw/olids/raw_olids_medication_statement.sql`
- `models/raw/olids/raw_olids_observation.sql`
- `models/raw/olids/raw_olids_patient.sql`
- `models/raw/olids/raw_olids_patient_address.sql`
- `models/raw/olids/raw_olids_procedure_request.sql`
- `models/raw/olids/raw_olids_schedule.sql`
- `models/staging/olids/stg_olids_concept.sql`
- `models/staging/olids/stg_olids_concept_map.sql`
- `models/staging/olids/stg_olids_diagnostic_order.sql`
- `models/staging/olids/stg_olids_encounter.sql`
- `models/staging/olids/stg_olids_medication_order.sql`
- `models/staging/olids/stg_olids_medication_statement.sql`
- `models/staging/olids/stg_olids_observation.sql`
- `models/staging/olids/stg_olids_patient.sql`
- `models/staging/olids/stg_olids_patient_address.sql`
- `models/staging/olids/stg_olids_procedure_request.sql`
- `models/staging/olids/stg_olids_schedule.sql`

#### Removed (2)

- `models/raw/olids/raw_olids_terminology_concept.sql`
- `models/raw/olids/raw_olids_terminology_concept_map.sql`

## [v1.17.2] - 2025-10-21

[#134](https://github.com/ncl-icb-analytics/dbt-ncl-analytics/pull/134) · _EddieDavison92_

### Fixed

- fix: remove orphaned phenolab models and disable dependents
- fix: handle special characters in raw model column aliases

### Models Changed

#### Added (7)

- `models/raw/phenolab/raw_phenolab_standard_units.sql`
- `models/raw/phenolab/raw_phenolab_unit_conversions.sql`
- `models/raw/phenolab/raw_phenolab_unit_mappings.sql`
- `models/raw/phenolab/raw_phenolab_value_bounds.sql`
- `models/raw/shared/raw_reference_diagnostics_weekly_dm01_historic.sql`
- `models/raw/shared/raw_reference_indicator_data_sp.sql`
- `models/raw/shared/raw_reference_indicator_update_log_sp.sql`

#### Modified (16)

- `models/modelling/commissioning/diagnosis/int_sus_ae_diagnosis.sql`
- `models/modelling/commissioning/diagnosis/int_sus_ip_diagnosis.sql`
- `models/modelling/commissioning/diagnosis/int_sus_op_diagnosis.sql`
- `models/modelling/commissioning/observations/int_commissioning_observations.sql`
- `models/modelling/commissioning/procedure/int_sus_ip_procedure.sql`
- `models/modelling/commissioning/procedure/int_sus_op_procedure.sql`
- `models/raw/commissioning/raw_wl_wl_clockstarts_data.sql`
- `models/raw/commissioning/raw_wl_wl_clockstops_data.sql`
- `models/raw/commissioning/raw_wl_wl_diagnostics_data.sql`
- `models/raw/commissioning/raw_wl_wl_openpathways_data.sql`
- `models/raw/shared/raw_reference_diagnostics_monthly_dm01_pre_release.sql`
- `models/raw/shared/raw_reference_diagnostics_weekly_dm01.sql`
- `models/raw/shared/raw_reference_ia_certificates_monthly.sql`
- `models/raw/shared/raw_reference_ia_completion_monthly.sql`
- `models/raw/shared/raw_reference_ia_enrolments_monthly.sql`
- `models/raw/shared/raw_reference_ia_new_users_monthly.sql`

#### Removed (1)

- `models/raw/phenolab/raw_phenolab_base_athena_concept.sql`

## [v1.17.1] - 2025-10-21

[#133](https://github.com/ncl-icb-analytics/dbt-ncl-analytics/pull/133) · _EddieDavison92_

### Fixed

- fix: revert gender to sex in raw layer source columns

### Models Changed

#### Modified (2)

- `models/raw/shared/raw_reference_gp_reg_pat_prac_lsoa_all.sql`
- `models/raw/shared/raw_reference_indicator_data.sql`

## [v1.17.0] - 2025-10-21

[#129](https://github.com/ncl-icb-analytics/dbt-ncl-analytics/pull/129) · _KatsplatH_

### Added

- feat: alcohol assessed SMI

### Models Changed

#### Added (2)

- `models/modelling/olids/observations/int_smi_alcohol_all.sql`
- `models/modelling/olids/observations/int_smi_alcohol_latest.sql`

#### Modified (2)

- `models/modelling/olids/observations/int_smi_care_plan_all.sql`
- `models/modelling/olids/observations/int_smi_care_plan_latest.sql`

## [v1.16.1] - 2025-10-21

[#128](https://github.com/ncl-icb-analytics/dbt-ncl-analytics/pull/128) · _EddieDavison92_

### Fixed

- fix: use sentinel dates for NULL diagnosis dates instead of filtering

### Models Changed

#### Modified (20)

- `models/modelling/olids/diagnoses/qof/int_asthma_diagnoses_all.sql`
- `models/modelling/olids/diagnoses/qof/int_atrial_fibrillation_diagnoses_all.sql`
- `models/modelling/olids/diagnoses/qof/int_cancer_diagnoses_all.sql`
- `models/modelling/olids/diagnoses/qof/int_chd_diagnoses_all.sql`
- `models/modelling/olids/diagnoses/qof/int_ckd_diagnoses_all.sql`
- `models/modelling/olids/diagnoses/qof/int_copd_diagnoses_all.sql`
- `models/modelling/olids/diagnoses/qof/int_dementia_diagnoses_all.sql`
- `models/modelling/olids/diagnoses/qof/int_depression_diagnoses_all.sql`
- `models/modelling/olids/diagnoses/qof/int_diabetes_diagnoses_all.sql`
- `models/modelling/olids/diagnoses/qof/int_epilepsy_diagnoses_all.sql`
- `models/modelling/olids/diagnoses/qof/int_heart_failure_diagnoses_all.sql`
- `models/modelling/olids/diagnoses/qof/int_hypertension_diagnoses_all.sql`
- `models/modelling/olids/diagnoses/qof/int_learning_disability_diagnoses_all.sql`
- `models/modelling/olids/diagnoses/qof/int_ndh_diagnoses_all.sql`
- `models/modelling/olids/diagnoses/qof/int_osteoporosis_diagnoses_all.sql`
- `models/modelling/olids/diagnoses/qof/int_pad_diagnoses_all.sql`
- `models/modelling/olids/diagnoses/qof/int_palliative_care_diagnoses_all.sql`
- `models/modelling/olids/diagnoses/qof/int_rheumatoid_arthritis_diagnoses_all.sql`
- `models/modelling/olids/diagnoses/qof/int_smi_diagnoses_all.sql`
- `models/modelling/olids/diagnoses/qof/int_stroke_tia_diagnoses_all.sql`

## [v1.16.0] - 2025-10-21

[#126](https://github.com/ncl-icb-analytics/dbt-ncl-analytics/pull/126) · _KatsplatH_

### Added

- feat: CI and valproate demograohics update and new table for MH care plan

### Models Changed

#### Added (2)

- `models/modelling/olids/observations/int_smi_care_plan_all.sql`
- `models/modelling/olids/observations/int_smi_care_plan_latest.sql`

#### Modified (2)

- `models/modelling/olids/programme/childhood_imms/int_childhood_imms_current_population.sql`
- `models/modelling/olids/programme/valproate/int_valproate_base.sql`

## [v1.15.0] - 2025-10-21

[#127](https://github.com/ncl-icb-analytics/dbt-ncl-analytics/pull/127) · _em-baldwin_

### Added

- Feat: adding gp, vulnerability, and expected appointments

### Models Changed

#### Modified (1)

- `models/published/direct_care/C_LTCS/cohort_data.sql`

## [v1.14.4] - 2025-10-21

[#124](https://github.com/ncl-icb-analytics/dbt-ncl-analytics/pull/124) · _EddieDavison92_

### Fixed

- fix: revert clinical terminology values to 'sex'

### Changed

- refactor: update remaining 'sex' references to 'gender'
- refactor: replace 'sex' with 'gender' terminology throughout codebase

### Models Changed

#### Modified (26)

- `models/modelling/olids/observations/int_alcohol_audit_scores.sql`
- `models/modelling/olids/observations/int_bmi_all.sql`
- `models/modelling/olids/programme/childhood_imms/int_childhood_imms_current_population.sql`
- `models/modelling/olids/programme/valproate/int_valproate_base.sql`
- `models/published/direct_care/C_LTCS/inclusion_cohort.sql`
- `models/published/direct_care/olids/covid_flu_dashboard_base.sql`
- `models/published/direct_care/olids/ltc_lcs_cf_dashboard_base.sql`
- `models/published/direct_care/olids/population_health_needs_base.sql`
- `models/published/direct_care/olids/population_health_needs_base_readable.sql`
- `models/published/direct_care/olids/population_health_needs_demographics_ltcs.sql`
- `models/published/direct_care/olids/view_population_health_needs_base.sql`
- `models/published/direct_care/olids/view_population_health_needs_base_ltc.sql`
- `models/raw/shared/raw_reference_gp_reg_pat_prac_lsoa_all.sql`
- `models/raw/shared/raw_reference_indicator_data.sql`
- `models/reporting/olids/clinical_safety/fct_clinical_safety_valproate_pregnancy.sql`
- `models/reporting/olids/geography/fct_household_members.sql`
- `models/reporting/olids/person_analytics/person_month_analysis_base.sql`
- `models/reporting/olids/person_demographics/dim_person_demographics.sql`
- `models/reporting/olids/person_demographics/dim_person_demographics_historical.sql`
- `models/reporting/olids/person_demographics/dim_person_women_child_bearing_age.sql`
- `models/reporting/olids/person_status/fct_person_alcohol_status.sql`
- `models/reporting/olids/person_status/fct_person_pregnancy_status.sql`
- `models/reporting/olids/programme/cervical_screening/fct_cervical_screening_status.sql`
- `models/reporting/olids/programme/ltc_lcs/cf/fct_ltc_lcs_population_summary.sql`
- `models/reporting/olids/programme/valproate/dim_valproate_action_status.sql`
- `models/reporting/olids/programme/valproate/dim_valproate_db_scope.sql`

## [v1.14.3] - 2025-10-20

[#125](https://github.com/ncl-icb-analytics/dbt-ncl-analytics/pull/125) · _EddieDavison92_

### Fixed

- fix: add sourceclusterid to childhood imms codes unique test

## [v1.14.2] - 2025-10-20

[#123](https://github.com/ncl-icb-analytics/dbt-ncl-analytics/pull/123) · _EddieDavison92_

### Changed

- refactor: simplify int_childhood_imms_historical_population to use person_month_analysis_base
- refactor: convert dim_person_demographics_historical to SCD-2 pattern

### Models Changed

#### Modified (4)

- `models/modelling/olids/programme/childhood_imms/int_childhood_imms_historical_population.sql`
- `models/reporting/olids/person_analytics/person_month_analysis_base.sql`
- `models/reporting/olids/person_demographics/dim_person_demographics.sql`
- `models/reporting/olids/person_demographics/dim_person_demographics_historical.sql`

## [v1.14.1] - 2025-10-20

[#120](https://github.com/ncl-icb-analytics/dbt-ncl-analytics/pull/120) · _EddieDavison92_

### Fixed

- fix: correct LTC LCS case finding models to match 2025/26 spec

### Models Changed

#### Modified (13)

- `models/modelling/olids/programme/ltc_lcs/int_ltc_lcs_cf_cvd_base_population.sql`
- `models/reporting/olids/programme/ltc_lcs/cf/dim_ltc_lcs_cf_af_61.sql`
- `models/reporting/olids/programme/ltc_lcs/cf/dim_ltc_lcs_cf_af_62.sql`
- `models/reporting/olids/programme/ltc_lcs/cf/dim_ltc_lcs_cf_ckd_62.sql`
- `models/reporting/olids/programme/ltc_lcs/cf/dim_ltc_lcs_cf_cvd_61.sql`
- `models/reporting/olids/programme/ltc_lcs/cf/dim_ltc_lcs_cf_cvd_62.sql`
- `models/reporting/olids/programme/ltc_lcs/cf/dim_ltc_lcs_cf_cvd_63.sql`
- `models/reporting/olids/programme/ltc_lcs/cf/dim_ltc_lcs_cf_cvd_64.sql`
- `models/reporting/olids/programme/ltc_lcs/cf/dim_ltc_lcs_cf_cvd_65.sql`
- `models/reporting/olids/programme/ltc_lcs/cf/dim_ltc_lcs_cf_cvd_66.sql`
- `models/reporting/olids/programme/ltc_lcs/cf/dim_ltc_lcs_cf_cyp_ast_61.sql`
- `models/reporting/olids/programme/ltc_lcs/cf/dim_ltc_lcs_cf_dm_61.sql`
- `models/reporting/olids/programme/ltc_lcs/cf/dim_ltc_lcs_cf_dm_66.sql`

## [v1.14.0] - 2025-10-20

[#122](https://github.com/ncl-icb-analytics/dbt-ncl-analytics/pull/122) · _KatsplatH_

### Added

- feat: update vaccinations with schedule changes

### Models Changed

#### Modified (6)

- `models/modelling/olids/programme/childhood_imms/int_childhood_imms_person_level_adolescent.sql`
- `models/modelling/olids/programme/childhood_imms/int_childhood_imms_person_level_child.sql`
- `models/modelling/olids/programme/childhood_imms/int_childhood_imms_vaccination_events_current.sql`
- `models/modelling/olids/programme/childhood_imms/int_childhood_imms_vaccination_events_historical.sql`
- `models/modelling/olids/programme/childhood_imms/int_childhood_imms_vaccs_current_age_1.sql`
- `models/modelling/olids/programme/childhood_imms/int_childhood_imms_vaccs_historical_age_1.sql`

## [v1.13.1] - 2025-10-20

[#112](https://github.com/ncl-icb-analytics/dbt-ncl-analytics/pull/112) · _Eddie Davison,Jessica Roberts_

### Changed

- renaming apc --> ip
- Apply monthly cost and duration allocation for inpatient activity
- removing config override for int_sus models, will use detault table materialisation instead
- adding totals and subtype breakdowns to fct_person_activity_by_month
- enriching ip encounters model
- Adding POD field to sus encounter models
- Adding primary key tests in int layer

### Models Changed

#### Added (3)

- `models/modelling/commissioning/encounters/int_sus_ip_encounters.sql`
- `models/staging/shared/stg_dictionary_dbo_patientclassification.sql`
- `models/staging/shared/stg_dictionary_ip_admissionmethods.sql`

#### Modified (6)

- `models/modelling/commissioning/encounters/int_csds_encounters.sql`
- `models/modelling/commissioning/encounters/int_gp_encounters_appt.sql`
- `models/modelling/commissioning/encounters/int_sus_ae_encounters.sql`
- `models/modelling/commissioning/encounters/int_sus_op_encounters.sql`
- `models/reporting/commissioning/person_history/fct_person_activity_by_month.sql`
- `models/staging/commissioning/stg_sus_apc_spell.sql`

#### Removed (1)

- `models/modelling/commissioning/encounters/int_sus_apc_encounters.sql`

## [v1.13.0] - 2025-10-17

[#119](https://github.com/ncl-icb-analytics/dbt-ncl-analytics/pull/119) · _EddieDavison92_

### Added

- feat: add LD, SMI, and pregnancy filters to LTC/LCS dashboard

### Models Changed

#### Modified (2)

- `models/published/direct_care/olids/ltc_lcs_cf_dashboard_base.sql`
- `models/reporting/olids/programme/ltc_lcs/cf/fct_ltc_lcs_person_dashboard.sql`

## [v1.12.0] - 2025-10-17

[#118](https://github.com/ncl-icb-analytics/dbt-ncl-analytics/pull/118) · _KatsplatH_

### Added

- feat: updated imms code dose

### Models Changed

#### Modified (3)

- `models/modelling/olids/programme/childhood_imms/int_childhood_imms_code_dose.sql`
- `models/modelling/olids/programme/childhood_imms/int_childhood_imms_current_population.sql`
- `models/modelling/olids/programme/childhood_imms/int_childhood_imms_historical_population.sql`

## [v1.11.0] - 2025-10-17

[#116](https://github.com/ncl-icb-analytics/dbt-ncl-analytics/pull/116) · _EddieDavison92_

### Added

- feat: enhance episode of care registration with SCD and deceased logic
- feat: add Fact Patient sources and GP registration comparison analyses

### Models Changed

#### Added (52)

- `models/raw/shared/raw_fact_patient_dimconditiontype.sql`
- `models/raw/shared/raw_fact_patient_dimdatasource.sql`
- `models/raw/shared/raw_fact_patient_dimlifetimeconditiongroup.sql`
- `models/raw/shared/raw_fact_patient_dimlifetimeconditiongrouptypelookup.sql`
- `models/raw/shared/raw_fact_patient_dimlifetimeconditiontype.sql`
- `models/raw/shared/raw_fact_patient_dimriskscore.sql`
- `models/raw/shared/raw_fact_patient_dimriskscoreband.sql`
- `models/raw/shared/raw_fact_patient_factactivity.sql`
- `models/raw/shared/raw_fact_patient_factcarehome.sql`
- `models/raw/shared/raw_fact_patient_factcarehomeraw.sql`
- `models/raw/shared/raw_fact_patient_factcondition.sql`
- `models/raw/shared/raw_fact_patient_factlifetimecondition.sql`
- `models/raw/shared/raw_fact_patient_factpractice.sql`
- `models/raw/shared/raw_fact_patient_factpracticeraw.sql`
- `models/raw/shared/raw_fact_patient_factprofile.sql`
- `models/raw/shared/raw_fact_patient_factresidence.sql`
- `models/raw/shared/raw_fact_patient_factresidenceraw.sql`
- `models/raw/shared/raw_fact_patient_factriskscore.sql`
- `models/raw/shared/raw_fact_patient_factvital.sql`
- `models/raw/shared/raw_fact_patient_metaconditioncodemaskaediag.sql`
- `models/raw/shared/raw_fact_patient_metaconditioncodemaskicd10.sql`
- `models/raw/shared/raw_fact_patient_metaconditioncodemaskread.sql`
- `models/raw/shared/raw_fact_patient_metaconditioncodemaskreadmedication.sql`
- `models/raw/shared/raw_fact_patient_metaconditioncodemasksnomed.sql`
- `models/raw/shared/raw_fact_patient_metaconditioncodemasksnomedmedication.sql`
- `models/raw/shared/raw_fact_patient_metalifetimeconditioncodemaskaediag.sql`
- `models/raw/shared/raw_fact_patient_metalifetimeconditioncodemaskicd10.sql`
- `models/raw/shared/raw_fact_patient_metalifetimeconditioncodemaskread.sql`
- `models/raw/shared/raw_fact_patient_metalifetimeconditioncodemasksnomed.sql`
- `models/raw/shared/raw_fact_patient_metariskscorehospitalfrailtyicd10.sql`
- `models/raw/shared/raw_fact_patient_metavital.sql`
- `models/raw/shared/raw_fact_patient_metavitalread.sql`
- `models/raw/shared/raw_fact_patient_metavitalsnomed.sql`
- `models/raw/shared/raw_fact_practice_dimlistsizeage.sql`
- `models/raw/shared/raw_fact_practice_dimlistsizeageband.sql`
- `models/raw/shared/raw_fact_practice_dimlistsizesource.sql`
- `models/raw/shared/raw_fact_practice_factlistsize.sql`
- `models/raw/shared/raw_fact_practice_factlistsizeage.sql`
- `models/raw/shared/raw_fact_practice_factlistsizeageband.sql`
- `models/raw/shared/raw_fact_practice_factlistsizelocation.sql`
- `models/raw/shared/raw_reference_cancer_fds_outcomes.sql`
- `models/raw/shared/raw_reference_diagnostics_monthly_dm01_pre_release.sql`
- `models/raw/shared/raw_reference_diagnostics_weekly_dm01.sql`
- `models/raw/shared/raw_reference_ia_certificates_monthly.sql`
- `models/raw/shared/raw_reference_ia_completion_monthly.sql`
- `models/raw/shared/raw_reference_ia_enrolments_monthly.sql`
- `models/raw/shared/raw_reference_ia_new_users_monthly.sql`
- `models/raw/shared/raw_reference_ia_numbers.sql`
- `models/raw/shared/raw_reference_indicator_area_mismatch_log.sql`
- `models/raw/shared/raw_reference_ingestion_error_log.sql`
- `models/raw/shared/raw_reference_uclh_msk.sql`
- `models/staging/shared/stg_fact_patient_factpractice.sql`

#### Modified (8)

- `models/modelling/commissioning/diagnosis/int_sus_ae_diagnosis.sql`
- `models/modelling/commissioning/diagnosis/int_sus_ip_diagnosis.sql`
- `models/modelling/commissioning/diagnosis/int_sus_op_diagnosis.sql`
- `models/modelling/commissioning/procedure/int_sus_ip_procedure.sql`
- `models/modelling/commissioning/procedure/int_sus_op_procedure.sql`
- `models/modelling/olids/person_attributes/int_patient_registrations_episode_of_care.sql`
- `models/raw/shared/raw_reference_indicator_data.sql`
- `models/raw/shared/raw_reference_indicator_update_log.sql`

## [v1.10.0] - 2025-10-17

[#117](https://github.com/ncl-icb-analytics/dbt-ncl-analytics/pull/117) · _KatsplatH_

### Added

- feat: updating imms to use vaccine_id rather than vaccine_order

### Models Changed

#### Modified (17)

- `models/modelling/olids/programme/childhood_imms/int_childhood_imms_current_population.sql`
- `models/modelling/olids/programme/childhood_imms/int_childhood_imms_currently_eligible.sql`
- `models/modelling/olids/programme/childhood_imms/int_childhood_imms_dose_count_eoy_age_1.sql`
- `models/modelling/olids/programme/childhood_imms/int_childhood_imms_dose_count_eoy_age_2.sql`
- `models/modelling/olids/programme/childhood_imms/int_childhood_imms_dose_count_eoy_age_5.sql`
- `models/modelling/olids/programme/childhood_imms/int_childhood_imms_historical_population.sql`
- `models/modelling/olids/programme/childhood_imms/int_childhood_imms_vaccination_status_current.sql`
- `models/modelling/olids/programme/childhood_imms/int_childhood_imms_vaccs_current_age_1.sql`
- `models/modelling/olids/programme/childhood_imms/int_childhood_imms_vaccs_current_age_11.sql`
- `models/modelling/olids/programme/childhood_imms/int_childhood_imms_vaccs_current_age_16.sql`
- `models/modelling/olids/programme/childhood_imms/int_childhood_imms_vaccs_current_age_2.sql`
- `models/modelling/olids/programme/childhood_imms/int_childhood_imms_vaccs_current_age_5.sql`
- `models/modelling/olids/programme/childhood_imms/int_childhood_imms_vaccs_historical_age_1.sql`
- `models/modelling/olids/programme/childhood_imms/int_childhood_imms_vaccs_historical_age_11.sql`
- `models/modelling/olids/programme/childhood_imms/int_childhood_imms_vaccs_historical_age_16.sql`
- `models/modelling/olids/programme/childhood_imms/int_childhood_imms_vaccs_historical_age_2.sql`
- `models/modelling/olids/programme/childhood_imms/int_childhood_imms_vaccs_historical_age_5.sql`

## [v1.9.1] - 2025-10-15

[#115](https://github.com/ncl-icb-analytics/dbt-ncl-analytics/pull/115) · _em-baldwin_

### Fixed

- fix: renaming folder causing duplicate files

### Models Changed

#### Removed (3)

- `models/published/direct_care/CLTCS/cohort_data.sql`
- `models/published/direct_care/CLTCS/inclusion_cohort.sql`
- `models/published/direct_care/CLTCS/trajectories.sql`

## [v1.9.0] - 2025-10-15

[#114](https://github.com/ncl-icb-analytics/dbt-ncl-analytics/pull/114) · _em-baldwin_

### Added

- feat: adding base tables onto new structure
- feat: adding base tables onto new structure

### Changed

- feature: core tables and mapping

### Models Changed

#### Added (6)

- `models/published/direct_care/CLTCS/cohort_data.sql`
- `models/published/direct_care/CLTCS/inclusion_cohort.sql`
- `models/published/direct_care/CLTCS/trajectories.sql`
- `models/published/direct_care/C_LTCS/cohort_data.sql`
- `models/published/direct_care/C_LTCS/inclusion_cohort.sql`
- `models/published/direct_care/C_LTCS/trajectories.sql`

## [v1.8.0] - 2025-10-15

[#113](https://github.com/ncl-icb-analytics/dbt-ncl-analytics/pull/113) · _em-baldwin_

### Added

- feat: adding sus measures

### Models Changed

#### Added (3)

- `models/reporting/commissioning/person_level/fct_person_gp_recent.sql`
- `models/reporting/commissioning/person_level/fct_person_sus_ae_recent.sql`
- `models/reporting/commissioning/person_level/fct_person_sus_apc_recent.sql`

#### Modified (2)

- `models/modelling/commissioning/encounters/int_gp_encounters_appt.sql`
- `models/staging/commissioning/stg_sus_ae_emergency_care.sql`

## [v1.7.0] - 2025-10-15

[#111](https://github.com/ncl-icb-analytics/dbt-ncl-analytics/pull/111) · _Thomas Shallcross_

### Added

- feat: added community care contacts into person activity monthly summary model

### Models Changed

#### Added (1)

- `models/modelling/commissioning/encounters/int_csds_encounters.sql`

#### Modified (1)

- `models/reporting/commissioning/person_history/fct_person_activity_by_month.sql`

## [v1.6.0] - 2025-10-14

[#109](https://github.com/ncl-icb-analytics/dbt-ncl-analytics/pull/109) · _Emily Baldwin,Thomas Shallcross_

### Added

- feat: added extra colums to staged csds referral and carecontacts tables
- feat: adding old models for dedup fixes

### Fixed

- fix: issue #84 removed null tests for sk_patient id
- fix: changed csds identifiers to unique_identifiers - which is unique across providers
- fix: refactord csds_deduplication macro

### Changed

- refactor: renamed int_csds table

### Models Changed

#### Added (8)

- `models/modelling/commissioning/encounters/int_csds_activities_summary.sql`
- `models/modelling/commissioning/encounters/int_csds_contacts_activity_summary.sql`
- `models/modelling/commissioning/encounters/int_csds_contacts_summary.sql`
- `models/modelling/commissioning/encounters/int_csds_referrals_summary.sql`
- `models/staging/commissioning/stg_csds_bridging.sql`
- `models/staging/commissioning/stg_csds_cyp101referral.sql`
- `models/staging/commissioning/stg_csds_cyp201carecontact.sql`
- `models/staging/commissioning/stg_csds_cyp202careactivity.sql`

## [v1.5.0] - 2025-10-14

[#110](https://github.com/ncl-icb-analytics/dbt-ncl-analytics/pull/110) · _KatsplatH_

### Added

- feat: add residential location to person level

### Models Changed

#### Modified (2)

- `models/modelling/olids/programme/childhood_imms/int_childhood_imms_person_level_adolescent.sql`
- `models/modelling/olids/programme/childhood_imms/int_childhood_imms_person_level_child.sql`

## [v1.4.0] - 2025-10-14

[#108](https://github.com/ncl-icb-analytics/dbt-ncl-analytics/pull/108) · _KatsplatH_

### Added

- feat: fixdobjuly2024

### Models Changed

#### Modified (1)

- `models/modelling/olids/programme/childhood_imms/int_childhood_imms_historical_population.sql`

## [v1.3.0] - 2025-10-14

[#107](https://github.com/ncl-icb-analytics/dbt-ncl-analytics/pull/107) · _em-baldwin_

### Added

- feat: gp encounters added to activity profile. Not checked for mapping issues in dim_pseudo_person

### Fixed

- fix: cut and paste typo

### Models Changed

#### Modified (1)

- `models/reporting/commissioning/person_history/fct_person_activity_by_month.sql`

## [v1.2.1] - 2025-10-13

[#106](https://github.com/ncl-icb-analytics/dbt-ncl-analytics/pull/106) · _EddieDavison92_

### Fixed

- fix: treat NULL as not deleted in OLIDS staging models

### Models Changed

#### Modified (22)

- `models/staging/olids/stg_olids_allergy_intolerance.sql`
- `models/staging/olids/stg_olids_appointment.sql`
- `models/staging/olids/stg_olids_appointment_practitioner.sql`
- `models/staging/olids/stg_olids_diagnostic_order.sql`
- `models/staging/olids/stg_olids_encounter.sql`
- `models/staging/olids/stg_olids_episode_of_care.sql`
- `models/staging/olids/stg_olids_flag.sql`
- `models/staging/olids/stg_olids_location.sql`
- `models/staging/olids/stg_olids_location_contact.sql`
- `models/staging/olids/stg_olids_medication_order.sql`
- `models/staging/olids/stg_olids_medication_statement.sql`
- `models/staging/olids/stg_olids_organisation.sql`
- `models/staging/olids/stg_olids_patient.sql`
- `models/staging/olids/stg_olids_patient_contact.sql`
- `models/staging/olids/stg_olids_patient_registered_practitioner_in_role.sql`
- `models/staging/olids/stg_olids_patient_uprn.sql`
- `models/staging/olids/stg_olids_practitioner.sql`
- `models/staging/olids/stg_olids_practitioner_in_role.sql`
- `models/staging/olids/stg_olids_procedure_request.sql`
- `models/staging/olids/stg_olids_referral_request.sql`
- `models/staging/olids/stg_olids_schedule.sql`
- `models/staging/olids/stg_olids_schedule_practitioner.sql`

## [v1.2.0] - 2025-10-13

[#105](https://github.com/ncl-icb-analytics/dbt-ncl-analytics/pull/105) · _KatsplatH_

### Added

- feat: create flag for born on 1st July 2024

### Models Changed

#### Modified (10)

- `models/modelling/olids/programme/childhood_imms/int_childhood_imms_current_population.sql`
- `models/modelling/olids/programme/childhood_imms/int_childhood_imms_currently_eligible.sql`
- `models/modelling/olids/programme/childhood_imms/int_childhood_imms_historical_population.sql`
- `models/modelling/olids/programme/childhood_imms/int_childhood_imms_vaccination_events_historical.sql`
- `models/modelling/olids/programme/childhood_imms/int_childhood_imms_vaccination_status_current.sql`
- `models/modelling/olids/programme/childhood_imms/int_childhood_imms_vaccs_current_age_1.sql`
- `models/modelling/olids/programme/childhood_imms/int_childhood_imms_vaccs_current_age_11.sql`
- `models/modelling/olids/programme/childhood_imms/int_childhood_imms_vaccs_current_age_16.sql`
- `models/modelling/olids/programme/childhood_imms/int_childhood_imms_vaccs_current_age_2.sql`
- `models/modelling/olids/programme/childhood_imms/int_childhood_imms_vaccs_current_age_5.sql`

## [v1.1.0] - 2025-10-10

[#82](https://github.com/ncl-icb-analytics/dbt-ncl-analytics/pull/82) · _EddieDavison92_

### Added

- feat: add polypharmacy indicator based on NHSBSA standard

### Changed

- refactor: remove duplicate config from YAML files (prefer SQL config)

### Changed

- docs: clarify medication orders are GP issuance events not pharmacy dispensing

### Changed

- test: remove brittle accepted_values tests for BNF chapters

### Models Changed

#### Added (6)

- `models/modelling/olids/medications/int_medication_orders_repeat_current.sql`
- `models/modelling/olids/medications/int_polypharmacy_current.sql`
- `models/modelling/olids/medications/int_polypharmacy_history.sql`
- `models/modelling/olids/medications/int_polypharmacy_medications_current.sql`
- `models/modelling/olids/medications/int_polypharmacy_medications_list.sql`
- `models/reporting/olids/person_status/fct_person_polypharmacy_current.sql`

## [v1.0.2] - 2025-10-10

[#101](https://github.com/ncl-icb-analytics/dbt-ncl-analytics/pull/101) · _EddieDavison92_

### Fixed

- fix: also filter ICB organisations to only include london ICBs
- fix: filter london boroughs model to only include london boroughs

### Changed

- refactor: remove london boroughs model and clean names in mappings

### Models Changed

#### Modified (2)

- `models/modelling/olids/geography/int_geography_mappings.sql`
- `models/modelling/olids/person_attributes/int_person_geography.sql`

#### Removed (1)

- `models/modelling/olids/geography/int_geography_london_boroughs.sql`

## [v1.0.1] - 2025-10-10

[#100](https://github.com/ncl-icb-analytics/dbt-ncl-analytics/pull/100) · _EddieDavison92_

### Changed

- refactor: update source generation script and remove manual phenolab models

### Changed

- docs: update README and add configurable automatic schema generation

### Models Changed

#### Removed (2)

- `models/phenolab/base_athena__concept.sql`
- `models/phenolab/base_snomed__concept.sql`

## [v1.0.0] - 2025-10-10
