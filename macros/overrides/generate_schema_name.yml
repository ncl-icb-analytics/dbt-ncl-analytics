version: 2

macros:
  - name: generate_schema_name
    description: >
      dbt override for schema name generation with automatic derivation from folder structure.
      For domains in var('auto_schema_domains'), derives DOMAIN_SUBDOMAIN from path.




      Behavior:

      - Domains in auto_schema_domains: Schema derived from {DOMAIN}_{SUBDOMAIN}

      - Other domains: Uses explicit schema from config or target.schema default
    arguments:
      - name: custom_schema_name
        type: string
        description: Custom schema name from config

      - name: node
        type: object
        description: dbt node object (provided by dbt)
