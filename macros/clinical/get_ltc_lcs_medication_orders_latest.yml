version: 2

macros:
  - name: get_ltc_lcs_medication_orders_latest
    description: >
      Returns the most recent medication order per person and valueset.
      Filters by LTC/LCS valueset IDs or friendly names, ordered by clinical_effective_date desc.


      Usage:

      ```sql

      {{ get_ltc_lcs_medication_orders_latest('on_dm_reg_priority_group_3b_mrb_vs5') }}

      {{ get_ltc_lcs_medication_orders_latest('on_ckd_reg_acr_rx,on_ckd_reg_acr_atorvastatin') }}

      ```
    arguments:
      - name: valuesets
        type: string
        description: >
          Comma-separated valueset IDs or friendly names to filter by.
          Can be passed as 'VS001,VS002' or "'VS001','VS002'"
