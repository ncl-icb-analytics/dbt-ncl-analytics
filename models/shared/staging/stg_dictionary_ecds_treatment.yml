version: 2
models:
- name: stg_dictionary_ecds_treatment
  description: ECDS treatment reference data with HRG grouping mappings
  tests:
  - dbt_utils.unique_combination_of_columns:
      combination_of_columns:
      - ecds_unique_id
      - valid_from
  columns:
  - name: ecds_unique_id
    description: ECDS unique identifier (part of composite key with valid_from)
    tests:
    - not_null
  - name: snomed_code
    description: SNOMED CT code
    tests:
    - not_null
  - name: valid_from
    description: Valid from date (part of composite key with ecds_unique_id)
    tests:
    - not_null:
        severity: warn
