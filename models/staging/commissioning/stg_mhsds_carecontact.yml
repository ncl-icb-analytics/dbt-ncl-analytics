models:
  - name: stg_mhsds_carecontact
    description: 'Mental Health Services Data Set (MHSDS) care contacts'
    config:
      meta:
        owner:
          name: Thomas Shallcross
    tests:
      - dbt_utils.unique_combination_of_columns:
          combination_of_columns:
            - uniq_serv_req_id
            - uniq_care_cont_id
      - dbt_expectations.expect_table_row_count_to_be_between:
          min_value: 1
    columns:
      - name: uniq_care_cont_id
        description: MHSDS care contact identifier
        tests:
          - not_null

      - name: uniq_serv_req_id
        description: unique service request identifier
        tests:
          - not_null

      - name: person_id
        description: MHSDS person identifier

      - name: care_cont_date
        description: The date on which a Care Contact took place, or, if cancelled, was scheduled to take place.

      - name: org_id_prov

      - name: attend_status
        description: This indicates whether or not an APPOINTMENT for a CARE CONTACT took place. If the APPOINTMENT did not take place it also indicates whether or not advanced warning was given.

      - name: clin_cont_dur_of_care_cont
        description: The total duration of the direct clinical contact at a CARE CONTACT in minutes, excluding any administration time prior to or after the CARE CONTACT and the CARE PROFESSIONAL's travelling time to the CARE CONTACT. CLINICAL CONTACT DURATION OF CARE CONTACT includes the time spent on the different CARE ACTIVITIES that may be performed in a single CARE CONTACT. The duration of each CARE ACTIVITY is recorded in CLINICAL CONTACT DURATION OF CARE ACTIVITY. This should be recorded in minutes.
 
      - name: dm_icb_commissioner
