version: 2
models:
  - name: stg_reference_ltc_lcs_expanded_concepts
    description: Expanded SNOMED codes from valuesets after terminology server 
      processing
    config:
      meta:
        owner:
          name: Eddie Davison
    tests:
      - dbt_utils.unique_combination_of_columns:
          combination_of_columns:
            - concept_id
            - valueset_id
      - dbt_expectations.expect_table_row_count_to_be_between:
          min_value: 1
    columns:
      - name: concept_id
        description: Unique identifier for this concept
        tests:
          - not_null
      - name: valueset_id
        description: Foreign key to associated valueset
        tests:
          - not_null
      - name: snomed_code
        description: SNOMED CT code (joins to observations/medications)
        tests:
          - not_null
      - name: display
        description: Display term for the SNOMED code
      - name: source
        description: Source of the code (original, translated, child, etc.)
      - name: exclude_children
        description: Flag indicating if child concepts should be excluded
      - name: is_refset
        description: Flag indicating if this represents a reference set
