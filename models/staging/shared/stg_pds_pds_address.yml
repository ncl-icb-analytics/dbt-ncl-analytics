version: 2
models:
- name: stg_pds_pds_address
  description: Personal Demographics Service patient address
  tests:
  - dbt_utils.unique_combination_of_columns:
      combination_of_columns:
      - row_id
      - sk_patient_id
  columns:
  - name: row_id
    description: Row identifier
    tests:
    - not_null
  - name: sk_patient_id
    description: Surrogate key patient identifier (pseudonymised NHS number)
    tests:
    - not_null
  - name: postcode_sector
    description: Postcode sector of residence
  - name: lsoa_21
    description: 2021 LSOA Code of residence