version: 2
models:
- name: stg_dictionary_ecds_diagnosis
  description: ECDS diagnosis reference data with ICD-10/11 mappings and clinical
    flags
  tests:
  - dbt_utils.unique_combination_of_columns:
      combination_of_columns:
      - ecds_unique_id
      - valid_from
  columns:
  - name: ecds_unique_id
    description: ECDS unique identifier (part of composite key with valid_from)
    tests:
    - not_null
  - name: snomed_code
    description: SNOMED CT code
    tests:
    - not_null
  - name: icd10_mapping
    description: Mapped ICD-10 code
  - name: icd11_mapping
    description: Mapped ICD-11 code
  - name: valid_from
    description: Valid from date (part of composite key with ecds_unique_id)
    tests:
    - not_null
