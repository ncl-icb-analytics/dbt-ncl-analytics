version: 2
models:
- name: stg_olids_concept_map
  description: Mappings between different coding systems and terminologies. Deduplicated
    on business key.
  columns:
  - name: source_code_id
    description: Foreign key to concept.id - source concept being mapped from
  - name: target_code_id
    description: Foreign key to concept.id - target concept being mapped to
    tests:
    - relationships:
        to: ref('stg_olids_concept')
        field: id
  - name: is_primary
    description: Boolean indicating if this is the primary mapping for the source
      concept
  - name: equivalence
    description: Mapping equivalence type (equivalent, equal, wider, subsumes, narrower,
      specializes, inexact, unmatched, disjoint)
  tests:
  - dbt_expectations.expect_table_row_count_to_be_between:
      min_value: 1
