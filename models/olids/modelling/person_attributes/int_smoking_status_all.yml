version: 2
models:
  - name: int_smoking_status_all
    description: 'Smoking status observations for QOF tracking and cardiovascular risk stratification.

      One row per smoking status observation using LSMOK_COD, EXSMOK_COD, and NSMOK_COD clusters with current, ex-smoker, and never-smoked classification.'
    tests:
      - cluster_ids_exist:
          arguments:
            cluster_ids: EXSMOK_COD, LSMOK_COD, NSMOK_COD
      - dbt_utils.unique_combination_of_columns:
          arguments:
            combination_of_columns:
              - id
              - source_cluster_id
