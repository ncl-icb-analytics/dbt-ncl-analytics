version: 2
models:
  - name: int_flu_health_social_care_worker
    description: 'Flu vaccination eligibility for health and social care workers with direct patient contact.

      Key Features:

      • Care setting codes: CAREHOME_COD, NURSEHOME_COD, DOMCARE_COD

      • Age restrictions: 16-64 years (under 65 as over 65s eligible via age-based rule)

      • Latest occurrence in medical history qualifies

      • Focuses on current employment status indicators

      • Generates data for current and previous flu campaigns automatically

      Purpose: Identify healthcare workers eligible for flu vaccination due to occupational exposure risk.'
    
    config:
      meta:
        indicator:
          id: "FLU_HEALTHCARE_WORKER"
          type: "PROGRAMME"
          category: "FLU"
          clinical_domain: "Occupational Health"
          name_short: "Flu Eligible Healthcare Worker"
          description_short: "Health and social care workers eligible for flu vaccination"
          description_long: >
            Flu vaccination eligibility for health and social care workers with direct patient
            contact roles. Uses CAREHOME_COD, NURSEHOME_COD, and DOMCARE_COD cluster codes
            indicating employment in care settings. Age restriction of 16-64 years (over 65s
            captured by age-based eligibility). Focuses on occupational infection risk.
          is_qof: false
          source_column: "person_id"
          sort_order: "FLU_17_HEALTHCARE_WORKER"
          usage_contexts:
            - "COVID_AND_FLU_DASHBOARD"
            - "FLU_REPORTING"
          code_clusters:
            - cluster_id: "CAREHOME_COD"
              category: "INCLUSION"
            - cluster_id: "NURSEHOME_COD"
              category: "INCLUSION"
            - cluster_id: "DOMCARE_COD"
              category: "INCLUSION"
          thresholds:
            - population_group: "HEALTHCARE_WORKERS"
              threshold_type: "AGE_ELIGIBILITY"
              threshold_value: "16"
              threshold_operator: "AT_OR_ABOVE"
              threshold_unit: "years"
              description: "Minimum age for healthcare worker eligibility"
              sort_order: 1
            - population_group: "HEALTHCARE_WORKERS"
              threshold_type: "AGE_ELIGIBILITY"
              threshold_value: "65"
              threshold_operator: "UNDER"
              threshold_unit: "years"
              description: "Maximum age for healthcare worker eligibility (over 65s use age-based rule)"
              sort_order: 2
    
    columns:
      - name: campaign_id
        description: 'Flu campaign identifier (e.g., flu_2024_25, flu_2023_24)'
      - name: campaign_category
        description: 'Category of eligibility criteria (always "Occupational")'
      - name: risk_group
        description: 'Risk group classification (always "Health Social Care Worker")'
      - name: person_id
        description: 'Unique identifier for the person'
      - name: qualifying_event_date
        description: 'Date of qualifying employment indicator (latest care setting code)'
      - name: reference_date
        description: 'Campaign reference date used for eligibility assessment'
      - name: description
        description: 'Description of eligibility criteria'
      - name: birth_date_approx
        description: 'Approximate birth date used for age calculation'
      - name: age_months_at_ref_date
        description: 'Age in months at campaign reference date (16-64 years required)'
      - name: age_years_at_ref_date
        description: 'Age in years at campaign reference date'
      - name: created_at
        description: 'Audit timestamp for record creation (campaign audit end date)'