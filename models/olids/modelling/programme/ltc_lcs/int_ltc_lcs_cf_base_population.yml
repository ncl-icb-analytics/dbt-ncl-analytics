version: 2
models:
  - name: int_ltc_lcs_cf_base_population
    description: 'Base population for Long Term Conditions case finding indicators with appropriate exclusions.

      One row per eligible person excluding patients already in LTC programmes and those with NHS health checks in last 24 months to prevent duplicate programme targeting.'
    
    config:
      meta:
        indicator:
          id: "LTC_LCS_CF_BASE_POPULATION"
          type: "POPULATION"
          category: "CASE_FINDING"
          clinical_domain: "Population Health Management"
          name_short: "LTC/LCS base population"
          description_short: "Eligible population for LTC/LCS case finding with exclusions applied"
          description_long: >
            Active patients with practice registration, excluding existing LTC programme 
            participants (CKD, AF, COPD, HTN, CHD, STIA, PAD, HF, DM2, FHYP, NAF, AST, CYP_AST) 
            and recent NHS health check recipients (24m) to prevent duplicate targeting. 
            Forms foundation for all case finding indicators.
          is_qof: false
          source_column: "person_id"
          sort_order: "LTC_LCS_BASE_001"
          usage_contexts:
            - "LTC_LCS_DASHBOARD"
            - "CASE_FINDING_PROGRAMME"
          code_clusters:
            - cluster_id: "HEALTH_CHECK_COMP"
              category: "EXCLUSION"
            - cluster_id: "CKD_COD"
              category: "EXCLUSION"
            - cluster_id: "AFIB_COD"
              category: "EXCLUSION"
            - cluster_id: "COPD_COD"
              category: "EXCLUSION"
            - cluster_id: "HTN_COD"
              category: "EXCLUSION"
            - cluster_id: "CHD_COD"
              category: "EXCLUSION"
            - cluster_id: "STIA_COD"
              category: "EXCLUSION"
            - cluster_id: "PAD_COD"
              category: "EXCLUSION"
            - cluster_id: "HF_COD"
              category: "EXCLUSION"
            - cluster_id: "DMTYPE2_COD"
              category: "EXCLUSION"
            - cluster_id: "DM_COD"
              category: "EXCLUSION"
            - cluster_id: "FHYP_COD"
              category: "EXCLUSION"
            - cluster_id: "NAF_COD"
              category: "EXCLUSION"
            - cluster_id: "AST_COD"
              category: "EXCLUSION"
          thresholds:
            - population_group: "ALL_ADULTS"
              threshold_type: "NHS_HEALTH_CHECK_EXCLUSION"
              threshold_value: "24"
              threshold_operator: "WITHIN"
              threshold_unit: "months"
              description: "Exclude patients with NHS health checks in last 24 months"
              sort_order: 1
