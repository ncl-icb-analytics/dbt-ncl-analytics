version: 2
models:
  - name: dim_ltc_lcs_cf_dm_61
    description: 'Diabetes case finding for patients aged 17+ at high risk through multiple criteria.

      One row per person meeting diabetes risk criteria (HbA1c ≥42, QDiabetes ≥5.6%, QRisk2 >20%, or gestational diabetes history).'
    
    config:
      meta:
        indicator:
          id: "LTC_LCS_CF_DM_61"
          type: "CASE_FINDING"
          category: "DM"
          clinical_domain: "Diabetes Mellitus Case Finding"
          name_short: "High DM risk"
          description_short: "Patients at high diabetes risk through multiple criteria"
          description_long: >
            Age 17+, HbA1c ≥42 mmol/mol (5y), QDiabetes ≥5.6%, QRISK2 >20%,
            or gestational diabetes history.
          is_qof: false
          source_column: "person_id"
          sort_order: "LTC_LCS_DM_61"
          usage_contexts:
            - "LTC_LCS_DASHBOARD"
            - "CASE_FINDING_PROGRAMME"
          code_clusters:
            - cluster_id: "HBA1C"
              category: "INCLUSION"
            - cluster_id: "QDIABETES_RISK"
              category: "INCLUSION"
            - cluster_id: "QRISK2_10YEAR"
              category: "INCLUSION"
            - cluster_id: "GESTDIAB_COD"
              category: "INCLUSION"
            - cluster_id: "DIABETES_REGISTER_CODES"
              category: "EXCLUSION"
          thresholds:
            - population_group: "ADULTS_17_PLUS"
              threshold_type: "HBA1C_VALUE"
              threshold_value: "42"
              threshold_operator: "GREATER_THAN_OR_EQUAL"
              threshold_unit: "mmol/mol"
              description: "HbA1c ≥42 mmol/mol within 5 years"
              sort_order: 1
            - population_group: "ADULTS_17_PLUS"
              threshold_type: "QDIABETES_SCORE"
              threshold_value: "5.6"
              threshold_operator: "GREATER_THAN_OR_EQUAL"
              threshold_unit: "percentage"
              description: "QDiabetes score ≥5.6%"
              sort_order: 2
            - population_group: "ADULTS_17_PLUS"
              threshold_type: "QRISK2_SCORE"
              threshold_value: "20"
              threshold_operator: "GREATER_THAN"
              threshold_unit: "percentage"
              description: "QRISK2 score >20%"
              sort_order: 3
