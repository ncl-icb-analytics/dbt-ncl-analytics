version: 2

models:
  - name: def_indicator_usage
    description: 'Usage contexts for each indicator.
    
      Tracks where indicators are used across dashboards, reports, and programmes. 
      Use this table to understand where indicators are used in dashboards and reports.'
    
    columns:
      - name: indicator_id
        description: Foreign key linking to def_indicator table
        tests:
          - not_null
          - relationships:
              arguments:
                to: ref('def_indicator')
                field: indicator_id
              
      - name: usage_context
        description: Where this indicator is used
        tests:
          - not_null
              
      - name: metadata_extracted_at
        description: Timestamp when metadata was extracted from YAML
        tests:
          - not_null