version: 2
models:
  - name: dim_households
    description: 'Geographic reference for household dwellings with location context and occupancy patterns.

      Key Features:

      • UPRN-based household identification

      • LSOA geography and deprivation indices

      • Dwelling activity classification based on registration patterns

      Purpose: Enables geographic analysis of health outcomes at household level.'
    columns:
      - name: household_id
        description: 'Unique identifier for household (surrogate key from UPRN hash)'
        tests:
          - unique
          - not_null
      
      - name: uprn_hash
        description: 'Hashed unique property reference number identifying dwelling'
        tests:
          - unique
          - not_null
      
      - name: dwelling_activity_status
        description: 'Classification of dwelling occupancy: Recently active, Previously active, or Historically active only'
        tests:
          - not_null
          - accepted_values:
              arguments:
                values: ['Recently active', 'Previously active', 'Historically active only']
      
      - name: first_known_occupation_date
        description: 'Earliest registration date at this dwelling'
      
      - name: last_known_activity_date
        description: 'Most recent registration date at this dwelling'
      
      - name: lsoa_code_21
        description: 'Lower Super Output Area code (2021 boundaries) for dwelling location'
      
      - name: lsoa_name_21
        description: 'Lower Super Output Area name (2021 boundaries) for dwelling location'
      
      - name: imd_decile_19
        description: 'Index of Multiple Deprivation decile (2019) where 1 is most deprived'
      
      - name: imd_quintile_19
        description: 'Index of Multiple Deprivation quintile (2019) where 1 is most deprived'
      
      - name: created_at
        description: 'Timestamp when record was created'
        tests:
          - not_null
