models:
  - name: fct_person_asthma_register
    description: 'QOF asthma register for patients aged 6+ with active asthma diagnosis.

      One row per person with latest AST_COD > latest ASTRES_COD and asthma medication prescribed within last 12 months.'
    
    config:
      meta:
        indicator:
          id: "AST006"
          type: "CONDITION"
          category: "LTC"
          clinical_domain: "Respiratory"
          name_short: "Asthma"
          description_short: "QOF asthma register"
          description_long: >
            Asthma diagnosed using QOF criteria: Age â‰¥6 years with active asthma diagnosis 
            where latest asthma code is more recent than any resolution code, plus asthma 
            medication prescribed within last 12 months for medication validation. Maps to 
            QOF indicator AST006 (Asthma Register). Uses AST_COD for diagnosis codes and 
            ASTRES_COD for resolution codes.
          is_qof: true
          qof_indicator: "AST006"
          source_column: "is_on_register"
          usage_contexts:
            - "POPULATION_HEALTH_NEEDS_DASHBOARD"
            - "QOF"
          code_clusters:
            - cluster_id: "AST_COD"
              category: "INCLUSION"
            - cluster_id: "ASTRES_COD"
              category: "RESOLUTION"
