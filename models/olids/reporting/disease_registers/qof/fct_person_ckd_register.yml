version: 2
models:
  - name: fct_person_ckd_register
    description: 'QOF chronic kidney disease register for patients aged 18+ with active CKD diagnosis.

      One row per person with latest CKD_COD > latest CKDRES_COD or no resolution recorded.'
    
    config:
      meta:
        indicator:
          id: "CKD005"
          type: "CONDITION"
          category: "LTC"
          clinical_domain: "Nephrology"
          name_short: "Chronic Kidney Disease"
          description_short: "QOF chronic kidney disease register"
          description_long: >
            Chronic kidney disease diagnosed using QOF criteria: Age â‰¥18 years with active 
            CKD diagnosis where latest CKD code is more recent than any resolution code, or 
            no resolution recorded. Lab data available separately for clinical monitoring. 
            Maps to QOF indicator CKD005 (CKD Register). Uses CKD_COD for diagnosis codes 
            and CKDRES_COD for resolution codes.
          is_qof: true
          qof_indicator: "CKD005"
          source_column: "is_on_register"
          usage_contexts:
            - "POPULATION_HEALTH_NEEDS_DASHBOARD"
            - "QOF"
          code_clusters:
            - cluster_id: "CKD_COD"
              category: "INCLUSION"
            - cluster_id: "CKDRES_COD"
              category: "RESOLUTION"
