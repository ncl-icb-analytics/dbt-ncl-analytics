version: 2
models:
  - name: stg_olids_person
    description: "Person-level demographic records used for patient identity management across systems. Deduplicated by id."
    columns:
      - name: id
        description: "Primary key - unique identifier for this person"
        tests:
          - unique
          - not_null

      - name: nhs_number_hash
        description: "Hashed NHS number for person identification"

      - name: title
        description: "Person title (Mr, Mrs, Dr, etc.)"

      - name: gender_concept_id
        description: "Foreign key to concept.id - person gender"

      - name: birth_year
        description: "Year of birth"

      - name: birth_month
        description: "Month of birth (1-12)"

      - name: death_year
        description: "Year of death, if deceased"

      - name: death_month
        description: "Month of death (1-12), if deceased"

      - name: lds_start_date_time
        description: "LDS datetime stamp from which the record version was correct - used for deduplication to get the latest record"
