version: 2
models:
  - name: stg_csds_bridging
    description: "Bridging table linking CSDS person identifiers to NHS numbers"
    tests:
      - dbt_utils.at_least_one
    columns:
      - name: person_id
        description: "CSDS person identifier"
        tests:
          - unique
          - not_null

      - name: sk_patient_id
        description: "Pseudonymised NHS number (surrogate key for patient)"
        tests:
          - not_null

      - name: person_index_id
        description: "Person index identifier"

      - name: pseudo_nhs_number
        description: "Pseudonymised NHS number"
