version: 2
models:
- name: stg_csds_bridging
  description: Bridging table linking CSDS person identifiers to NHS numbers
  columns:
  - name: person_id
    description: CSDS person identifier
    tests:
    - unique
    - not_null
  - name: sk_patient_id
    description: Pseudonymised NHS number (surrogate key for patient)
  - name: person_index_id
    description: Person index identifier
  - name: pseudo_nhs_number
    description: Pseudonymised NHS number
  tests:
  - dbt_expectations.expect_table_row_count_to_be_between:
      min_value: 1
