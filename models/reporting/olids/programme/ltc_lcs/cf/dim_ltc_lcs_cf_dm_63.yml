version: 2
models:
  - name: dim_ltc_lcs_cf_dm_63
    description: 'Case finding for patients with borderline HbA1c levels requiring diabetes surveillance.


      Business Logic:

      • Identifies patients aged 17+ with latest HbA1c ≥46 and <48 mmol/mol (borderline pre-diabetic)

      • Latest HbA1c must be more than 12 months old to identify monitoring gaps

      • Focuses on borderline glycaemic control requiring ongoing diabetes risk assessment

      • One row per eligible person with borderline HbA1c requiring intervention'
    
    config:
      meta:
        indicator:
          id: "LTC_LCS_CF_DM_63"
          type: "CASE_FINDING"
          category: "DM"
          clinical_domain: "Diabetes Mellitus Case Finding"
          name_short: "Borderline HbA1c"
          description_short: "Patients with old borderline HbA1c ≥46 <48 mmol/mol"
          description_long: >
            Age 17+, HbA1c ≥46 <48 mmol/mol >12 months old.
            Requires enhanced surveillance and prevention interventions.
          is_qof: false
          source_column: "person_id"
          sort_order: "LTC_LCS_DM_63"
          usage_contexts:
            - "LTC_LCS_DASHBOARD"
            - "CASE_FINDING_PROGRAMME"
          code_clusters:
            - cluster_id: "HBA1C_LEVEL"
              category: "INCLUSION"
            - cluster_id: "DIABETES_REGISTER_CODES"
              category: "EXCLUSION"
          thresholds:
            - population_group: "ADULTS_17_PLUS"
              threshold_type: "HBA1C_VALUE"
              threshold_value: "46"
              threshold_operator: "GREATER_THAN_OR_EQUAL"
              threshold_unit: "mmol/mol"
              description: "HbA1c ≥46 and <48 mmol/mol (borderline pre-diabetic)"
              sort_order: 1
            - population_group: "ADULTS_17_PLUS"
              threshold_type: "HBA1C_VALUE"
              threshold_value: "48"
              threshold_operator: "LESS_THAN"
              threshold_unit: "mmol/mol"
              description: "HbA1c upper limit <48 mmol/mol"
              sort_order: 2
            - population_group: "ADULTS_17_PLUS"
              threshold_type: "MONITORING_WINDOW"
              threshold_value: "12"
              threshold_operator: "GREATER_THAN"
              threshold_unit: "months"
              description: "Latest HbA1c must be more than 12 months old"
              sort_order: 3
