version: 2
models:
  - name: dim_ltc_lcs_cf_cyp_ast_61
    description: 'Case finding for children with possible asthma diagnosis.

      Identifies CYP aged 18 months to <18 years with asthma indicators but no diagnosis.

      One row per child with asthma medications, suspected asthma codes, or viral wheeze (age 6+).'

    config:
      meta:
        indicator:
          id: "LTC_LCS_CF_CYP_AST_61"
          type: "CASE_FINDING"
          category: "CYP_AST"
          clinical_domain: "Children and Young People Asthma Case Finding"
          name_short: "Possible asthma"
          description_short: "Children 18 months-<18 years with asthma indicators, no diagnosis"
          description_long: >
            Age 18m-<18y with inhalers, oral prednisolone, montelukast, or suspected asthma in last 12m,
            or age 6+ with viral induced wheeze in last 12m, no asthma diagnosis.
          is_qof: false
          source_column: "person_id"
          sort_order: "LTC_LCS_CYP_AST_61"
          usage_contexts:
            - "LTC_LCS_DASHBOARD"
            - "CASE_FINDING_PROGRAMME"
          code_clusters:
            - cluster_id: "ASTHMA_MEDICATIONS"
              category: "INCLUSION"
            - cluster_id: "ASTHMA_PREDNISOLONE"
              category: "INCLUSION"
            - cluster_id: "MONTELUKAST_MEDICATIONS"
              category: "INCLUSION"
            - cluster_id: "SUSPECTED_ASTHMA"
              category: "INCLUSION"
            - cluster_id: "VIRAL_WHEEZE"
              category: "INCLUSION"
              age_restriction: "6_YEARS_PLUS"
            - cluster_id: "ASTHMA_DIAGNOSIS"
              category: "EXCLUSION"
            - cluster_id: "ASTHMA_RESOLVED"
              category: "EXCLUSION"
          thresholds:
            - population_group: "CHILDREN_18_MONTHS_TO_18_YEARS"
              threshold_type: "AGE_RANGE"
              threshold_value: "18 months to <18 years"
              threshold_operator: "WITHIN"
              threshold_unit: "age"
              description: "Age 18 months to <18 years"
              sort_order: 1
            - population_group: "CHILDREN_6_YEARS_PLUS"
              threshold_type: "AGE_MINIMUM"
              threshold_value: "6"
              threshold_operator: "GREATER_THAN_OR_EQUAL"
              threshold_unit: "years"
              description: "Age 6+ for viral induced wheeze"
              sort_order: 2
            - population_group: "ALL_CHILDREN"
              threshold_type: "MONITORING_WINDOW"
              threshold_value: "12"
              threshold_operator: "WITHIN"
              threshold_unit: "months"
              description: "Medications or observations in last 12 months"
              sort_order: 3
