version: 2

models:
  - name: pit_smi_register
    description: |
      Serious Mental Illness register calculated as of a specific reference date.

      By default, calculates using CURRENT_DATE(). Override with:
      `dbt build --select pit_smi_register --vars '{"qof_reference_date": "2024-03-31"}'`

      Use cases:
      - QA validation against EMIS extracts at historical dates
      - Fiscal year-end snapshots
      - Trend analysis across multiple reference dates
    columns:
      - name: person_id
        description: Person identifier
      - name: register_name
        description: Register name (e.g., 'Serious Mental Illness')
      - name: is_on_register
        description: Whether person qualifies for register at reference date
      - name: reference_date
        description: Date at which register status was calculated
