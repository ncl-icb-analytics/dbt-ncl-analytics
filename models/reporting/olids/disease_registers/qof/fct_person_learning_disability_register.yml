version: 2
models:
  - name: fct_person_learning_disability_register
    description: 'QOF learning disability register for patients aged 14+ with learning
      disability diagnosis.

      One row per person with LD_COD present (learning disability is permanent condition).'

    tests:
      - dbt_utils.at_least_one:
          column_name: person_id

    columns:
      - name: person_id
        description: Unique identifier for the person
        tests:
          - unique
          - not_null

    config:
      meta:
        indicator:
          id: "LD001"
          type: "CONDITION"
          category: "LTC"
          clinical_domain: "Neurodevelopmental"
          name_short: "Learning Disability"
          description_short: "QOF learning disability register"
          description_long: >
            Learning disability diagnosed using QOF criteria: Age â‰¥14 years with learning  disability
            diagnosis. Learning disability is considered a permanent condition with  no
            resolution codes. Used for learning disability care pathway monitoring,
            health  equity assessment, special needs service coordination, and annual
            health checks.  Maps to QOF indicator LD001 (Learning Disability Register).
            Uses LD_COD for  diagnosis codes.
          is_qof: true
          qof_indicator: "LD001"
          source_column: "is_on_register"
          usage_contexts:
            - "POPULATION_HEALTH_NEEDS_DASHBOARD"
            - "QOF"
          code_clusters:
            - cluster_id: "LD_COD"
              category: "INCLUSION"
        owner:
          name: EddieDavison92
