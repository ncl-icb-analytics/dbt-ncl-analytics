version: 2
models:
  - name: fct_person_dementia_register
    description: 'QOF dementia register for patients with dementia diagnosis.

      One row per person with DEM_COD present (dementia is permanent condition).'

    tests:
      - dbt_utils.at_least_one:
          column_name: person_id

    columns:
      - name: person_id
        description: Unique identifier for the person
        tests:
          - unique
          - not_null

    config:
      meta:
        indicator:
          id: "DEM001"
          type: "CONDITION"
          category: "LTC"
          clinical_domain: "Mental Health"
          name_short: "Dementia"
          description_short: "QOF dementia register"
          description_long: >
            Dementia diagnosed using QOF criteria: Any dementia diagnosis code qualifies  for
            register inclusion. Dementia is considered a permanent condition with
            no  resolution codes. No age restrictions apply. Used for dementia care
            pathway  monitoring, cognitive health assessment, and memory service referral
            tracking.  Maps to QOF indicator DEM001 (Dementia Register). Uses DEM_COD
            for diagnosis codes.
          is_qof: true
          qof_indicator: "DEM001"
          source_column: "is_on_register"
          usage_contexts:
            - "POPULATION_HEALTH_NEEDS_DASHBOARD"
            - "QOF"
          code_clusters:
            - cluster_id: "DEM_COD"
              category: "INCLUSION"
        owner:
          name: EddieDavison92
