models:
  - name: fct_person_cyp_asthma_register
    description: 'Children and young people asthma register for paediatric asthma management.

      One row per person under 18 years with latest AST_COD > latest ASTRES_COD and asthma medication prescribed within last 12 months.'
    
    config:
      meta:
        indicator:
          id: "CYP_AST"
          type: "CONDITION"
          category: "LTC"
          clinical_domain: "Respiratory"
          name_short: "CYP Asthma"
          description_short: "Children and young people asthma register (non-QOF)"
          description_long: >
            Asthma register for children and young people under 18 years. Includes persons 
            with active asthma diagnosis (latest AST_COD more recent than any ASTRES_COD) 
            AND asthma medication prescribed within the last 12 months. This register 
            differs from QOF asthma by restricting to under-18 population and requiring 
            medication validation. Uses AST_COD (diagnosis), ASTRES_COD (resolution), 
            and ASTTRT_COD (treatment) cluster codes.
          is_qof: false
          source_column: "is_on_register"
          sort_order: "COND_RESP_CYP_AST"
          usage_contexts:
            - "POPULATION_HEALTH_NEEDS_DASHBOARD"
          code_clusters:
            - cluster_id: "AST_COD"
              category: "INCLUSION"
            - cluster_id: "ASTRES_COD"
              category: "RESOLUTION"
            - cluster_id: "ASTTRT_COD"
              category: "INCLUSION"
