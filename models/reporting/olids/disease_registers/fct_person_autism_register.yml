models:
  - name: fct_person_autism_register
    description: 'Autism spectrum disorder register for patients with autism diagnosis.

      One row per person with AUTISM_COD present (non-QOF).'

    tests:
      - dbt_utils.at_least_one:
          column_name: person_id

    config:
      meta:
        indicator:
          id: "AUTISM"
          type: "CONDITION"
          category: "LTC"
          clinical_domain: "Neurodevelopmental"
          name_short: "Autism Spectrum Disorder"
          description_short: "Autism register (non-QOF)"
          description_long: >
            Autism spectrum disorder register for persons with autism diagnosis.  Includes
            active patients with autism diagnosis using AUTISM_COD cluster codes.  No
            age restrictions or resolution codes applied. Used for neurodevelopmental
            care  pathway monitoring, complex needs identification, care coordination,
            mental health  co-morbidity monitoring, and healthcare access support.
            Lifelong neurodevelopmental  condition requiring ongoing support and care
            coordination. Distinct from learning  disability though can co-occur.
          is_qof: false
          source_column: "is_on_register"
          sort_order: "COND_NEURODEV_AUTISM"
          usage_contexts:
            - "POPULATION_HEALTH_NEEDS_DASHBOARD"
          code_clusters:
            - cluster_id: "AUTISM_COD"
              category: "INCLUSION"

        owner:
          name: Eddie Davison
    columns:
      - name: person_id
        description: Unique identifier for the person
        tests:
          - unique
          - not_null
