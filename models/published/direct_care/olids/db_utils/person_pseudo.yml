
models:
  - name: person_pseudo
    description: 'Published View: Person Pseudonym for Direct Care

      Provides pseudonymized hex keys for patient re-identification in direct care
      contexts. Built on dim_person_pseudo with HxFlake format transformation.

      Key Features:

      • One row per person_id

      • HxFlake format: XX-XXX-XXX (10 characters total)

      • Reversible transformation for re-identification

      • Direct care access layer

      Data Source: dim_person_pseudo'

    config:
      meta:
        owner:
          name: EddieDavison92
    columns:
      - name: person_id
        description: 'Unique person identifier'
        tests:
          - not_null
          - unique

      - name: sk_patient_id
        description: 'Surrogate key for patient record used in pseudonym generation'
        tests:
          - not_null

      - name: hx_flake
        description: 'Pseudonymized hex key in format XX-XXX-XXX for patient re-identification.
          Note: Multiple person_ids may share the same hx_flake when they share the
          same sk_patient_id (patient fragmentation).'
        tests:
          - not_null
          - unique:
              severity: warn
              warn_if: ">100"
