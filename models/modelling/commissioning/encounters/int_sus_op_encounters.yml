version: 2

models:
  - name: int_sus_op_encounters
    description: "Event history for outpatient encounters from SUS data"
    columns:
      - name: encounter_id
        data_type: varchar
        description: "Primary key for the encounter within SUS"
        tests:
          - unique
          - not_null

      - name: sk_patient_id
        data_type: varchar
        description: "Common commissioning patient identifier"
        tests:
          - not_null

      - name: provider_id
        data_type: varchar
        description: ""

      - name: site_id
        data_type: varchar
        description: ""

      - name: start_date
        data_type: timestamp_ntz
        description: ""

      - name: expected_duration
        data_type: varchar
        description: ""

      - name: appointment_outcome
        data_type: varchar
        description: ""

      - name: appointment_attended_or_dna
        data_type: varchar
        description: ""

      - name: appointment_first_attendance
        data_type: varchar
        description: "Flag for whether the appointment was a first attendance"

      - name: primary_reason_for_encounter
        data_type: varchar
        description: "Listed specialty code for the encounter"

      - name: acuity
        data_type: number
        description: "Referral priority used as a proxy for acuity"

      - name: primary_treatment
        data_type: varchar
        description: ""

      - name: source
        data_type: varchar
        description: "Commissioning data source"

      - name: pod
        data_type: varchar
        description: "Point of delivery, based on HRG code"

      - name: type
        data_type: varchar
        description: "HRG code type associated with the encounter"

      - name: cost
        data_type: number
        description: "SUS listed cost associated with the encounter"