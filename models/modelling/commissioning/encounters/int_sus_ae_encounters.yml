
models:
  - name: int_sus_ae_encounters
    description: "Event history for emergency encounters from SUS data. More information: https://digital.nhs.uk/data-and-information/data-collections-and-data-sets/data-sets/emergency-care-data-set-ecds/ecds-guidance"
    columns:
      - name: visit_occurrence_id
        data_type: number
        description: "Primary key for the encounter within SUS"
        tests:
          - unique
          - not_null

      - name: sk_patient_id
        data_type: varchar
        description: "Common commissioning patient identifier"
      
      - name: local_patient_identifier
        data_type: varchar
        description: "Trust-provided patient id."

      - name: source
        data_type: varchar
        description: "Commissioning data source"

      - name: organisation_id
        data_type: varchar
        description: "Organisation ID (type 41) of the provider, if invalid code trimmed to 3 characters"

      - name: organisation_id
        data_type: varchar
        description: "Organisation name of the provider"

      - name: organisation_name
        data_type: varchar
        description: "Provider organisation name"

      - name: site_id
        data_type: varchar
        description: "Site identifier"

      - name: site_name
        data_type: varchar
        description: "Site name"

      - name: pod
        data_type: varchar
        description: "Point of delivery category of the provider e.g. A&E, SDEC etc."

      - name: department_type
        data_type: varchar
        description: "Point of delivery code of the provider e.g. A&E, SDEC etc."

      - name: start_date
        data_type: timestamp_ntz
        description: "Date of arrival at urgent care department"

      - name: duration
        data_type: number
        description: "Time to urgent care department discharge from arrival, in minutes"

      - name: chief_complaint_code
        data_type: varchar
        description: "Chief complaint code of patient for the encounter"

      - name: chief_complaint_desc
        data_type: varchar
        description: "Chief complain snomed description of patient for the encounter"

      - name: chief_complaint_ecds_group1
        data_type: varchar
        description: "Chief complain description of patient for the encounter"

      - name: is_injury_related
        data_type: boolean
        description: "Flag for an injury related encounter"

      - name: acuity
        data_type: varchar
        description: "Clinical acuity code of the encounter"

      - name: primary_diagnosis_code_snomed
        data_type: varchar
        description: "The first listed diagnosis: considered to be the most important / significant."

      - name: primary_diagnosis_desc_snomed
        data_type: varchar
        description: "The first listed diagnosis: considered to be the most important / significant."

      - name: primary_diagnosis_code_icd10
        data_type: varchar
        description: "The first listed diagnosis: considered to be the most important / significant."

      - name: primary_diagnosis_desc_icd10
        data_type: varchar
        description: "The first listed diagnosis: considered to be the most important / significant."

      - name: primary_diagnosis_desc_ecds_group1
        data_type: varchar
        description: "The first listed diagnosis: considered to be the most important / significant."

      - name: primary_treatment
        data_type: varchar
        description: "First treatment function code (SNOMED) recorded in encounter"

      - name: primary_treatment_desc_snomed
        data_type: varchar
        description: "First treatment function code (SNOMED) recorded in encounter"

      - name: primary_treatment_desc_snomed
        data_type: varchar
        description: "First treatment function code (SNOMED) recorded in encounter"

      - name: primary_investigation
        data_type: varchar
        description: "First investigation function code (SNOMED) recorded in encounter"

      - name: primary_investigation_desc_snomed
        data_type: varchar
        description: "First investigation function code (SNOMED) recorded in encounter"

      - name: primary_investigation_desc_ecds_group1
        data_type: varchar
        description: "First investigation function code (SNOMED) recorded in encounter"
    
      - name: arrival_mode_code
        data_type: varchar
        description: ""

      - name: arrival_mode_desc
        data_type: varchar
        description: ""

      - name: discharge_destination_code
        data_type: varchar
        description: ""

      - name: discharge_destination_desc
        data_type: varchar
        description: ""

      - name: main_specialty_code
        data_type: varchar
        description: "Allocated specialty code in which the consultant is contracted or recognised for the attendance: 180, emergency medicine"

      - name: main_specialty_name
        data_type: varchar
        description: "Allocated specialty code in which the consultant is contracted or recognised for the attendance: 180, emergency medicine"

      - name: hrg_code
        data_type: varchar
        description: ""

      - name: core_hrg_desc
        data_type: varchar
        description: ""

      - name: core_hrg_chapter
        data_type: varchar
        description: ""

      - name: core_hrg_chapter_desc
        data_type: varchar
        description: ""

      - name: cost
        data_type: number
        description: "SUS listed cost associated with the encounter"

      - name: age_at_event
        data_type: number
        description: ""

      - name: gender_at_event
        data_type: varchar
        description: "The gender of a person. Person Stated Gender Code is self -declared or inferred by observation for those unable to declare their person stated gender. This information will be auto populated from NHS Spine / PAS where available otherwise entered by clerical staff."

      - name: gender_desc_at_event
        data_type: varchar
        description: ""

      - name: ethnicity_at_event
        data_type: varchar
        description: "The ethnicity of a person, as specified by the person. This information will be auto populated from NHS Spine/ PAS where available, otherwise  it will be entered by clerical staff. Ethnic category is the classification used for the 2001 census and is the national mandatory standard for the collection and analysis of ethnicity"

      - name: ethnicity_desc_at_event
        data_type: varchar
        description: ""

      - name: postcode_district_at_event
        data_type: varchar
        description: ""

      - name: lsoa_11_at_event
        data_type: varchar
        description: ""

      - name: lad_at_event
        data_type: varchar
        description: ""

      - name: imd_at_event
        data_type: varchar
        description: ""

      - name: reg_practice_at_event
        data_type: varchar
        description: ""

      - name: visit_occurrence_type
        data_type: varchar
        description: ""