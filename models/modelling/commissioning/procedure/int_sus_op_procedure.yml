version: 2

models:
  - name: int_sus_op_procedure
    description: "All OP procedures from SUS data"
    columns:
      - name: procedure_id
        data_type: varchar
        description: "Unique identifier for the procedure record"

      - name: date
        data_type: timestamp_ntz
        description: "Date of the appointment associated with the procedure"

      - name: visit_occurrence_id
        data_type: number
        description: "Unique identifier for the visit occurrence"

      - name: visit_occurrence_type
        data_type: varchar
        description: "Source of the visit occurrence (e.g., OP_ATTENDANCE = outpatient attendance)"

      - name: episodes_id
        data_type: number
        description: ""

      - name: problem_order
        data_type: number
        description: "Order of the procedure within the episode or visit"

      - name: rownumber_id
        data_type: number
        description: ""

      - name: sk_patient_id
        data_type: varchar
        description: "Unique identifier for the patient (pseudonymised NHS number)"

      - name: organisation_id
        data_type: varchar
        description: "Unique identifier for the provider organisation providing the service"

      - name: organisation_name
        data_type: varchar
        description: "Provider organisation name"

      - name: site_id
        data_type: varchar
        description: "Unique identifier for the site where the service was provided"

      - name: site_name
        data_type: varchar
        description: "Site name where the service was provided"

      - name: source_concept_code
        data_type: varchar
        description: "OPCS-4 code of the procedure"

      - name: concept_code
        data_type: varchar
        description: "OPCS-4 code of the procedure mapped to a standard concept via athena concept table"

      - name: concept_name
        data_type: varchar
        description: "OPCS-4 description of the procedure mapped to a standard concept via athena concept table"

      - name: concept_vocabulary
        data_type: varchar
        description: ""