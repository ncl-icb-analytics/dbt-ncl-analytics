version: 2
models:
  - name: int_antihypertensive_medications_all
    description: |
      Antihypertensive medication orders for blood pressure management.
      Uses ANTIHYPERTENSIVE_MEDICATIONS cluster from combined codesets.
      One row per medication order.
    config:
      meta:
        owner:
          name: Eddie Davison
    tests:
      - cluster_ids_exist:
          cluster_ids: ANTIHYPERTENSIVE_MEDICATIONS
    columns:
      - name: person_id
        description: 'Patient identifier'
      - name: medication_order_id
        description: 'Unique identifier for the medication order'
      - name: medication_statement_id
        description: 'Unique identifier for the medication statement'
      - name: order_date
        description: 'Date when antihypertensive medication was ordered'
        tests:
          - not_null
      - name: order_medication_name
        description: 'Name of the antihypertensive medication as ordered'
      - name: order_dose
        description: 'Prescribed dose of the medication'
      - name: order_quantity_value
        description: 'Quantity value of the medication ordered'
      - name: order_quantity_unit
        description: 'Unit of measurement for the medication quantity'
      - name: order_duration_days
        description: 'Duration of the medication order in days'
      - name: statement_medication_name
        description: 'Name of the medication in the statement record'
      - name: mapped_concept_code
        description: 'Standardised clinical code for the medication'
      - name: mapped_concept_display
        description: 'Human-readable description of the medication code'
      - name: cluster_id
        description: 'Cluster identifier (ANTIHYPERTENSIVE_MEDICATIONS)'
      - name: bnf_code
        description: 'BNF code if available'
      - name: bnf_name
        description: 'BNF name if available'
