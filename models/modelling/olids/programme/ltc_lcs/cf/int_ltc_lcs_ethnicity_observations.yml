version: 2
models:
  - name: int_ltc_lcs_ethnicity_observations
    description: 'Ethnicity-relevant observations for Long Term Conditions case finding
      measures with diabetes screening focus.

      One row per ethnicity observation covering BAME ethnicity, White British ethnicity,
      and diabetes screening excluded ethnicities using cluster IDs: ETHNICITY_BAME,
      ETHNICITY_WHITE_BRITISH, DIABETES_EXCLUDED_ETHNICITY.'
    config:
      meta:
        owner:
          name: EddieDavison92
    tests:
      - dbt_utils.at_least_one:
          column_name: person_id
      - cluster_ids_exist:
          cluster_ids: 
            ETHNICITY_BAME,ETHNICITY_WHITE_BRITISH,DIABETES_EXCLUDED_ETHNICITY
    columns:
      - name: person_id
        tests:
          - not_null
