version: 2
models:
  - name: int_ltc_lcs_dm_observations
    description: 'Diabetes-relevant observations for Long Term Conditions case finding measures.

      One row per clinical observation including HbA1c levels, QDiabetes risk scores, QRISK2 scores, BMI measurements, and gestational diabetes history using cluster IDs: HBA1C_LEVEL, QDIABETES_RISK, QRISK2_10YEAR, HISTORY_GESTATIONAL_DIABETES, GESTATIONAL_DIABETES_PREGNANCY_RISK, BMI_MEASUREMENT.'
    tests:
      - dbt_utils.at_least_one:
          column_name: person_id
      - cluster_ids_exist:
          cluster_ids: HBA1C_LEVEL,QDIABETES_RISK,QRISK2_10YEAR,HISTORY_GESTATIONAL_DIABETES,GESTATIONAL_DIABETES_PREGNANCY_RISK,BMI_MEASUREMENT
    columns:
      - name: person_id
        tests:
          - not_null
